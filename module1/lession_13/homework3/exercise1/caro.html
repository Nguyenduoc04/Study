<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Cờ Caro 5x5</title>
</head>
<body>

<h2>Cờ Caro 5x5</h2>
<p id="board"></p>
<p id="status">Lượt đầu tiên: O</p>
<input type="button" value="Change Value" onclick="changeValue()">

<script>
    const SIZE = 5;
    let board = [];
    let currentPlayer = 'O'; // bắt đầu O
    let gameOver = false;

    // Khởi tạo bàn cờ
    for (let i = 0; i < SIZE; i++) {
        board[i] = new Array(SIZE).fill('.');
    }

    // Hiển thị bàn cờ
    function displayBoard() {
        let data = '';
        for (let i = 0; i < SIZE; i++) {
            for (let j = 0; j < SIZE; j++) {
                data += `(${board[i][j]})  `;
            }
            data += '<br/>';
        }
        document.getElementById('board').innerHTML = data;
    }

    // Thay đổi giá trị theo lượt O/X
    function changeValue() {
        if (gameOver) return;

        let x = parseInt(prompt(`Nhập X (0-${SIZE-1}):`));
        let y = parseInt(prompt(`Nhập Y (0-${SIZE-1}):`));

        if (x >= 0 && x < SIZE && y >= 0 && y < SIZE) {
            if (board[x][y] !== '.') {
                alert("Ô này đã được đánh rồi!");
                return;
            }
            board[x][y] = currentPlayer;

            // Kiểm tra chiến thắng sau mỗi lượt
            if (checkWinner(x, y)) {
                displayBoard();
                document.getElementById('status').textContent = `Người chơi ${currentPlayer} chiến thắng!`;
                gameOver = true;
                return;
            }

            // Đổi lượt
            currentPlayer = currentPlayer === 'O' ? 'X' : 'O';
            document.getElementById('status').textContent = `Lượt của: ${currentPlayer}`;
        } else {
            alert(`Vị trí không hợp lệ! Nhập từ 0 đến ${SIZE-1}`);
        }
        displayBoard();
    }

    // Kiểm tra chiến thắng 3 ô liên tiếp
    function checkWinner(row, col) {
        const player = currentPlayer;

        // Hàng ngang
        for (let c = 0; c <= SIZE - 3; c++) {
            if (board[row][c] === player && board[row][c+1] === player && board[row][c+2] === player)
                return true;
        }

        // Cột dọc
        for (let r = 0; r <= SIZE - 3; r++) {
            if (board[r][col] === player && board[r+1][col] === player && board[r+2][col] === player)
                return true;
        }

        // Đường chéo chính
        for (let r = 0; r <= SIZE - 3; r++) {
            for (let c = 0; c <= SIZE - 3; c++) {
                if (board[r][c] === player && board[r+1][c+1] === player && board[r+2][c+2] === player)
                    return true;
            }
        }

        // Đường chéo phụ
        for (let r = 0; r <= SIZE - 3; r++) {
            for (let c = 2; c < SIZE; c++) {
                if (board[r][c] === player && board[r+1][c-1] === player && board[r+2][c-2] === player)
                    return true;
            }
        }

        return false;
    }

    // Hiển thị bàn cờ lần đầu
    window.onload = displayBoard;
</script>

</body>
</html>
